<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{contact.name}} Resume</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: #1a1a1a; 
      background: #fff; 
      line-height: 1.4;
      max-width: 8.5in; 
      margin: 0 auto; 
      padding: 0.35in;
      font-size: 10pt;
    }

    /* Compact Header */
    .header { 
      border-bottom: 2px solid #0d3775; 
      padding-bottom: 8px; 
      margin-bottom: 12px; 
    }
    .name { 
      font-size: 20pt; 
      font-weight: 700; 
      letter-spacing: -0.3px; 
      margin-bottom: 2px;
    }
    .tagline { 
      font-size: 10.5pt; 
      color: #0d3775; 
      font-weight: 600; 
      margin-bottom: 3px;
    }
    
    /* Fix contact info wrapping */
    .contact {
      display: flex; 
      flex-wrap: wrap; 
      align-items: center; 
      font-size: 9pt; 
      color: #444;
      gap: 0 12px;
    }
    .contact a { 
      color: #0d3775; 
      text-decoration: none; 
    }
    .contact a:hover { text-decoration: underline; }
    .contact span { white-space: nowrap; }
    .contact span:not(:last-child)::after { 
      content: "â€¢"; 
      color: #999; 
      margin-left: 12px; 
      display: inline-block;
    }

    /* Compact Summary */
    .summary { 
      font-size: 9.5pt; 
      color: #333; 
      line-height: 1.45;
      margin-bottom: 10px;
    }

    /* Smart Grid Layout - 2 column system */
    .resume-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px 16px;
    }

    /* Section containers */
    .section { 
      margin-bottom: 10px; 
      break-inside: avoid;
    }
    .section-full { grid-column: 1 / -1; }
    .section-left { grid-column: 1; }
    .section-right { grid-column: 2; }
    
    /* Compact section titles */
    .title {
      font-size: 11pt; 
      font-weight: 700; 
      letter-spacing: 0.3px; 
      text-transform: uppercase;
      color: #0d3775;
      border-bottom: 1px solid #d0d5dd; 
      padding-bottom: 2px; 
      margin-bottom: 6px;
    }

    /* Enhanced Technical Expertise - Compact & Rich */
    .expertise-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
    .expertise-area {
      padding: 6px 8px;
      background: #f8f9fb;
      border: 0.5px solid #e0e5eb;
      border-left: 2px solid #0d3775;
      border-radius: 5px;
    }
    .expertise-title {
      font-weight: 700;
      font-size: 8.5pt;
      color: #0d3775;
      margin-bottom: 2px;
    }
    .expertise-items {
      font-size: 8.5pt;
      color: #333;
      line-height: 1.3;
    }
    .expertise-context {
      font-size: 7.5pt;
      color: #666;
      font-style: italic;
      margin-top: 1px;
    }

    /* Compact Experience & Projects */
    .xp, .proj {
      margin-bottom: 8px;
      padding: 6px 8px;
      border: 0.5px solid #e0e5eb;
      border-left: 2px solid #0d3775;
      background: #fafbfc;
      border-radius: 5px;
    }
    
    .xp-head, .proj-head { 
      display: flex; 
      justify-content: space-between; 
      align-items: baseline; 
      flex-wrap: wrap;
      gap: 4px 10px;
      margin-bottom: 3px;
    }
    
    .xp-role, .proj-name { 
      font-weight: 700; 
      font-size: 9.5pt; 
      color: #1a1a1a;
    }
    .xp-company { 
      color: #0d3775; 
      font-weight: 600; 
    }
    .xp-dates { 
      font-size: 8.5pt; 
      color: #666; 
      white-space: nowrap; 
      margin-left: auto;
    }
    
    /* Compact bullets */
    .bullets { 
      margin: 3px 0 3px 16px; 
      font-size: 9pt;
      line-height: 1.35;
    }
    .bullets li { 
      margin-bottom: 2px; 
    }
    
    /* Project sections formatting */
    .proj-sections {
      font-size: 9pt;
      line-height: 1.35;
      margin: 3px 0;
    }
    .proj-section {
      margin-bottom: 2px;
    }
    .proj-section-title {
      font-weight: 600;
      color: #0d3775;
    }

    /* Compact skill tags */
    .skill-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 4px;
    }
    .skill-tag {
      padding: 1px 6px;
      border-radius: 10px;
      font-size: 7.5pt;
      background: #e8f0fe;
      color: #1967d2;
      white-space: nowrap;
    }
    .skill-tag-proven {
      background: #e6f4ea;
      color: #137333;
    }

    /* Work Samples - Compact Grid */
    .samples-grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr); /* repeat(2, 1fr);*/
      gap: 8px;
    }
    .sample-card {
      padding: 6px;
      border: 0.5px solid #e0e5eb;
      border-radius: 5px;
      background: #fafbfc;
      font-size: 8.5pt;
    }
    .sample-type {
      font-size: 7pt;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
    .sample-title {
      font-weight: 700;
      font-size: 8.5pt;
      color: #0d3775;
      margin: 1px 0;
    }
    .sample-desc {
      font-size: 8pt;
      color: #444;
      line-height: 1.3;
      margin-bottom: 2px;
    }
    .sample-link a {
      color: #0d3775;
      font-size: 8pt;
      text-decoration: none;
    }

    /* Compact Education & Publications */
    .edu, .pub {
      margin-bottom: 6px;
      font-size: 9pt;
    }
    .edu-degree, .pub-title { 
      font-weight: 700; 
      font-size: 9pt;
    }
    .edu-inst, .pub-venue { 
      color: #0d3775; 
      font-size: 8.5pt;
    }
    .edu-dates, .pub-year {
      color: #666;
      font-size: 8.5pt;
    }
    .pub a {
      color: #0d3775;
      text-decoration: none;
      font-size: 8pt;
    }
    
    /* List items */
    .list { 
      margin-left: 16px; 
      font-size: 9pt;
      line-height: 1.3;
    }
    .list li { 
      margin-bottom: 2px; 
    }

    /* ATS hidden keywords */
    .ats { 
      display: none; 
      font-size: 1pt; 
      color: #fff; 
    }

    /* Print optimizations */
    @media print {
      body { 
        padding: 0.25in; 
        font-size: 9.5pt; 
      }
      .header {
        page-break-after: avoid;
      }
      .section { 
        page-break-inside: avoid; 
      }
      .xp, .proj, .edu { 
        page-break-inside: avoid; 
      }
      /* Force page break after experience if needed */
      .force-page-break {
        page-break-after: always;
      }
    }

    /* Responsive fallback */
    @media (max-width: 7in) {
      .resume-grid {
        grid-template-columns: 1fr;
      }
      .section-left, .section-right {
        grid-column: 1 / -1;
      }
      .expertise-grid {
        grid-template-columns: 1fr;
      }
      .samples-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="name">{{contact.name}}</div>
    {{#if contact.tagline}}
      <div class="tagline">{{formatMaybeList contact.tagline " | "}}</div>
    {{/if}}
    <div class="contact">
      {{#if contact.email}}<span><a href="mailto:{{contact.email}}">{{contact.email}}</a></span>{{/if}}
      {{#if contact.phone}}<span><a href="tel:{{contact.phone}}">{{contact.phone}}</a></span>{{/if}}
      {{#if contact.location}}<span>{{contact.location}}</span>{{/if}}
      {{#if contact.linkedin}}<span><a href="{{ensureProtocol contact.linkedin}}">LinkedIn</a></span>{{/if}}
      {{#if contact.github}}<span><a href="{{ensureProtocol contact.github}}">GitHub</a></span>{{/if}}
      {{#if contact.portfolio}}<span><a href="{{ensureProtocol contact.portfolio}}">Portfolio</a></span>{{/if}}
    </div>
  </header>

  {{#if professional_summary}}
  <div class="summary">{{professional_summary}}</div>
  {{/if}}

  {{#if technical_expertise}}
  <section class="section">
    <div class="title">Technical Expertise</div>
    <div class="expertise-grid">
      {{#each technical_expertise}}
      <div class="expertise-area">
        <div class="expertise-title">{{@key}}</div>
        <div class="expertise-items">{{skills}}</div>
        {{#if context}}<div class="expertise-context">{{context}}</div>{{/if}}
      </div>
      {{/each}}
    </div>
  </section>
  {{/if}}

  {{#if experience}}
  <section class="section">
    <div class="title">Professional Experience</div>
    {{#each experience}}
      <div class="xp">
        <div class="xp-head">
          <div>
            <span class="xp-role">{{title}}</span>
            <span class="xp-company">@ {{company}}</span>
          </div>
          <span class="xp-dates">{{dates}}</span>
        </div>
        {{#if highlights}}
        <ul class="bullets">
          {{#each highlights}}<li>{{this}}</li>{{/each}}
        </ul>
        {{/if}}
        {{#if demonstrated_skills}}
        <div class="skill-tags">
          {{#each demonstrated_skills}}<span class="skill-tag skill-tag-proven">{{this}}</span>{{/each}}
        </div>
        {{/if}}
      </div>
    {{/each}}
  </section>
  {{/if}}

  <div class="resume-grid">
    <section class="section section-left">
      {{#if projects_all}}
      <div class="title">{{projects_title}}</div>
      {{#each projects_all}}
        <div class="proj">
          <div class="proj-head">
            <div class="proj-name">{{title}}</div>
          </div>
          {{#if description}}<div style="font-size: 8.5pt; color: #555; margin-bottom: 2px;">{{description}}</div>{{/if}}
          {{#if sections}}
            <div class="proj-sections">
              {{#each sections}}
                <div class="proj-section"><span class="proj-section-title">{{title}}:</span> {{content}}</div>
              {{/each}}
            </div>
          {{/if}}
          {{#if demonstrated_skills}}
          <div class="skill-tags">
            {{#each demonstrated_skills}}<span class="skill-tag">{{this}}</span>{{/each}}
          </div>
          {{/if}}
        </div>
      {{/each}}
      {{/if}}

      {{#if education}}
      <div class="title" style="margin-top: 10px;">Education</div>
      {{#each education}}
        <div class="edu">
          <div style="display: flex; justify-content: space-between; align-items: baseline;">
            <span class="edu-degree">{{degree}}</span>
            <span class="edu-dates">{{graduation}}</span>
          </div>
          <div class="edu-inst">{{institution}}</div>
          {{#if gpa}}<div style="font-size: 8.5pt; color: #666;">GPA: {{gpa}}</div>{{/if}}
        </div>
      {{/each}}
      {{/if}}

      {{#if leadership_mentoring}}
      <div class="title" style="{{#if publications}}margin-top: 10px;{{else if work_samples}}margin-top: 10px;{{/if}}">Leadership</div>
      <ul class="list">
        {{#each leadership_mentoring}}<li>{{this}}</li>{{/each}}
      </ul>
      {{/if}}
    </section>

    <section class="section section-right">
      {{#if work_samples}}
      <div class="title">Work Samples</div>
      <div class="samples-grid">
        {{#each work_samples}}
        <div class="sample-card">
          <div class="sample-type">{{type}}</div>
          <div class="sample-title">{{title}}</div>
          <div class="sample-desc">{{description}}</div>
          <div class="sample-link"><a href="{{ensureProtocol url}}">{{displayUrl url}}</a></div>
        </div>
        {{/each}}
      </div>
      {{/if}}

      {{#if publications}}
      <div class="title" style="{{#if work_samples}}margin-top: 10px;{{/if}}">Publications</div>
      {{#each publications}}
        <div class="pub">
          <div class="pub-title">{{title}}</div>
          <div class="pub-venue">
            {{#if url}}
              <a href="{{ensureProtocol url}}" style="color: #0d3775; text-decoration: none;">{{journal}} ({{year}})</a>
            {{else if doi}}
              <a href="{{doiUrl doi}}" style="color: #0d3775; text-decoration: none;">{{journal}} ({{year}})</a>
            {{else}}
              {{journal}} ({{year}})
            {{/if}}
          </div>
        </div>
      {{/each}}
      {{/if}}            

      {{#if certifications}}
      <div class="title" style="margin-top: 10px;">Certifications</div>
      <ul class="list">
        {{#each certifications}}<li>{{this}}</li>{{/each}}
      </ul>
      {{/if}}
    </section>
  </div>

  <!-- ATS Keywords -->
  <div class="ats">
    {{#each technical_expertise}}{{skills}} {{/each}}
    {{#each experience}}{{#each demonstrated_skills}}{{this}} {{/each}}{{/each}}
    {{#each projects_all}}{{#each demonstrated_skills}}{{this}} {{/each}}{{/each}}
  </div>
</body>
</html>